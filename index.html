<!DOCTYPE html>
<html lang="es" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="sa-verify" content="6z9qsalteadorn8" />
    <title>ZIP</title>
    <script src="lang.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
            if (e.matches) document.documentElement.classList.add('dark');
            else document.documentElement.classList.remove('dark');
        });
    </script>
    <style>
        * {
            @apply transition-colors;
        }

        #previewContent {
            @apply whitespace-pre-wrap;
            word-break: break-word;
        }

        #fileTree::-webkit-scrollbar {
            @apply w-1.5;
        }

        #fileTree::-webkit-scrollbar-track {
            @apply bg-transparent;
        }

        #fileTree::-webkit-scrollbar-thumb {
            @apply bg-zinc-300 dark:bg-zinc-700 rounded hover:bg-zinc-400 dark:hover:bg-zinc-600;
        }

        #previewContent::-webkit-scrollbar {
            @apply w-1.5;
        }

        #previewContent::-webkit-scrollbar-track {
            @apply bg-transparent;
        }

        #previewContent::-webkit-scrollbar-thumb {
            @apply bg-zinc-300 dark:bg-zinc-700 rounded hover:bg-zinc-400 dark:hover:bg-zinc-600;
        }
    </style>
</head>

<body class="bg-white dark:bg-zinc-950 text-zinc-900 dark:text-zinc-50 h-screen overflow-hidden">
    <div class="h-screen flex flex-col">
        <!-- Header -->
        <header id="header" class="hidden border-b border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900">
            <div class="px-4 py-4 flex flex-col md:flex-row items-stretch md:items-center justify-between gap-3 md:gap-4">
                <div class="flex items-center gap-2 md:gap-4 flex-1 min-w-0">
                    <a href="index.html" class="text-xl md:text-2xl font-semibold whitespace-nowrap flex-shrink-0 text-zinc-900 dark:text-zinc-50 hover:opacity-80 transition-opacity">ZIP</a>
                    <input type="text" id="searchInput" placeholder="Search files..."
                        class="bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-md px-3 py-1.5 text-xs text-zinc-900 dark:text-zinc-50 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-zinc-50 flex-1 min-w-0 md:w-64"
                        oninput="filterFileTree(this.value)">
                </div>
                <div class="flex items-center gap-2 md:gap-3 flex-wrap md:flex-nowrap">
                    <input type="text" id="urlInput" placeholder="ZIP URL"
                        class="bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-md px-3 py-1.5 text-xs text-zinc-900 dark:text-zinc-50 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-zinc-50 focus:border-transparent flex-1 md:flex-none md:w-48">
                    <button onclick="loadZipFromUrl()"
                        class="text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors flex-shrink-0"
                        title="Load from URL">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-back"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 11l-4 4l4 4m-4 -4h11a4 4 0 0 0 0 -8h-1" /></svg>
                    </button>

                    <label for="fileInput"
                        class="text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors flex-shrink-0 cursor-pointer"
                        title="Upload ZIP file">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-upload"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 9l5 -5l5 5" /><path d="M12 4l0 12" /></svg>
                    </label>
                    <input type="file" id="fileInput" accept=".zip" class="hidden">
                </div>
            </div>
        </header>

        <!-- Notificaciones Flotantes -->
        <div id="loading"
            class="hidden fixed bottom-4 right-4 px-4 py-3 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 text-xs text-blue-600 dark:text-blue-400 flex items-center gap-2 rounded-lg shadow-lg z-50">
            <div
                class="animate-spin h-3 w-3 border border-blue-600 dark:border-blue-400 border-t-transparent rounded-full">
            </div>
            <span>Loading...</span>
        </div>
        <div id="error"
            class="hidden fixed bottom-4 right-4 px-4 py-3 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 text-xs text-red-600 dark:text-red-400 rounded-lg shadow-lg z-50">
        </div>
        <div id="success"
            class="hidden fixed bottom-4 right-4 px-4 py-3 bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 text-xs text-green-600 dark:text-green-400 rounded-lg shadow-lg z-50">
        </div>

        <!-- Main Content -->
        <main class="flex-1 overflow-hidden w-full flex flex-col">
            <!-- Welcome Screen -->
            <div id="welcomeScreen" class="flex-1 flex flex-col items-center justify-center gap-8 px-4 py-8">
                <!-- Logo with style -->
                <div class="flex flex-col items-center gap-3">
                    <h1 class="text-6xl font-bold text-zinc-900 dark:text-zinc-50">ZIP</h1>
                </div>

                <!-- Description -->
                <div class="text-center max-w-md">
                    <p class="text-lg text-zinc-600 dark:text-zinc-400 mb-2">
                        Explore ZIP files without downloading
                    </p>
                    <p class="text-sm text-zinc-500 dark:text-zinc-500">
                        Open, view and download individual files directly from your browser
                    </p>
                </div>

                <!-- Input Group -->
                <div class="w-full max-w-md border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-lg overflow-hidden p-6">
                    <!-- Option 1: Upload / Drag and Drop -->
                    <div class="p-6 hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-colors text-center border-b border-zinc-200 dark:border-zinc-800" id="welcomeDropZone">
                        <label for="welcomeFileInput" class="block cursor-pointer">
                            <p class="text-base font-medium text-zinc-900 dark:text-zinc-50 mb-1">Drag, click here to upload</p>
                            <p class="text-sm text-zinc-500 dark:text-zinc-400">or write the URL below</p>
                        </label>
                        <input type="file" id="welcomeFileInput" accept=".zip" class="hidden">
                    </div>

                    <!-- Option 2: URL -->
                    <div class="p-6">
                        <input type="text" id="welcomeUrlInput" placeholder="https://example.com/archive.zip"
                            class="bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-md px-3 py-2 text-base text-zinc-900 dark:text-zinc-50 placeholder-zinc-400 dark:placeholder-zinc-600 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-zinc-50 focus:border-transparent w-full">
                    </div>
                </div>

                <!-- GitHub Link -->
                <div class="text-center mt-4">
                    <a href="https://github.com/salteadorneo/zip" target="_blank" class="text-xs text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300 transition-colors flex items-center justify-center gap-1">
                        <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
                        salteadorneo/zip v1.0.1
                    </a>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results" class="hidden flex-1 overflow-hidden flex flex-col">
                <!-- File Browser -->
                <div
                    class="border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 overflow-hidden flex flex-col h-full">
                    <!-- Content Area -->
                    <div class="flex flex-col md:flex-row flex-1 overflow-hidden">
                        <!-- File Tree -->
                        <div class="w-full md:w-1/3 md:max-h-none max-h-[40dvh] border-b md:border-b-0 md:border-r border-zinc-200 dark:border-zinc-800 flex flex-col">
                            <div class="p-3 border-b border-zinc-200 dark:border-zinc-800 flex-shrink-0">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-xs font-semibold text-zinc-800 dark:text-zinc-100 truncate flex-1 cursor-pointer hover:underline"
                                        id="fileName" onclick="downloadZipFile()" title="Click to download">-</h3>
                                    <div class="flex gap-1 flex-shrink-0">
                                        <button id="expandBtn" onclick="expandAllDirectories()"
                                            class="px-2 py-0.5 text-xs rounded bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-100 hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors"
                                            title="Expand all">+</button>
                                        <button id="collapseBtn" onclick="collapseAllDirectories()"
                                            class="px-2 py-0.5 text-xs rounded bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-100 hover:bg-zinc-300 dark:hover:bg-zinc-600 transition-colors"
                                            title="Collapse all">âˆ’</button>
                                    </div>
                                </div>
                            </div>
                            <div class="p-3 overflow-y-auto flex-1">
                                <div id="fileTree" class="space-y-0 text-sm"></div>
                            </div>
                        </div>

                        <!-- File Preview -->
                        <div class="w-full md:w-2/3 overflow-y-auto">
                            <div id="filePreview" class="hidden p-3 h-full flex flex-col">
                                <div
                                    class="mb-2 pb-2 border-b border-zinc-200 dark:border-zinc-800 sticky top-0 bg-white dark:bg-zinc-900 py-1 flex items-center justify-between">
                                    <h3 class="text-xs font-semibold text-zinc-800 dark:text-zinc-100"
                                        id="previewTitle"></h3>
                                    <div class="flex items-center gap-2">
                                        <button onclick="copyToClipboard()"
                                            class="text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors"
                                            title="Copy">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.657 1.343 -3 3 -3h10c.75 0 1.158 .385 1.5 1" /></svg>
                                        </button>
                                        <button onclick="downloadCurrentFile()"
                                            class="text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors"
                                            title="Download">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>
                                        </button>
                                    </div>
                                </div>
                                <div id="previewContent"
                                    class="bg-zinc-50 dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded p-4 font-mono text-xs text-zinc-700 dark:text-zinc-300 overflow-auto flex-1 whitespace-pre-wrap">
                                </div>
                            </div>
                            <div id="emptyState"
                                class="p-3 text-center text-zinc-500 dark:text-zinc-400 h-full flex items-center justify-center">
                                <p class="text-xs">Select a file to view</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Status Bar -->
        <footer id="statusBar"
            class="hidden border-t border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-800 text-xs text-zinc-600 dark:text-zinc-400 px-4 py-1.5 flex items-center gap-4 flex-wrap">
            <span>Files: <span id="statusFileCount">0</span></span>
            <span>Folders: <span id="statusDirCount">0</span></span>
            <span class="hidden md:inline ml-auto">Size: <span id="statusSize">0 B</span></span>
            <span class="hidden md:inline">Compressed: <span id="statusCompressed">0 B</span> <span id="statusRatio"></span></span>
            <span class="md:hidden ml-auto"><span id="statusCompressedMobile">0 B</span> <span id="statusRatioMobile"></span></span>
        </footer>
    </div>

    <script src="lib/core.js" type="module"></script>
    <script src="lib/jszip.js"></script>
    <script src="app.js" type="module"></script>
</body>

</html>